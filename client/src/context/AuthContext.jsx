import React, { createContext, useState, useEffect, useContext } from 'react';import api from '../utils/api';const AuthContext = createContext();export const useAuth = () => useContext(AuthContext);export const AuthProvider = ({ children }) => {    const [user, setUser] = useState(null);    const [loading, setLoading] = useState(true);    const [isAuthenticated, setIsAuthenticated] = useState(false);    useEffect(() => {        const checkAuth = async () => {            const token = localStorage.getItem('token');            if (token) {                try {                    setIsAuthenticated(true);                } catch (error) {                    console.error("Auth check failed", error);                    localStorage.removeItem('token');                    setIsAuthenticated(false);                }            }            setLoading(false);        };        checkAuth();    }, []);    const login = async (email, password) => {        try {            const res = await api.post('/auth/login', { email, password });            localStorage.setItem('token', res.data.token);            setIsAuthenticated(true);            return { success: true };        } catch (error) {            return {                success: false,                message: error.response?.data?.msg || 'Login failed'            };        }    };    const register = async (email, password) => {        try {            const res = await api.post('/auth/register', { email, password });            localStorage.setItem('token', res.data.token);            setIsAuthenticated(true);            return { success: true };        } catch (error) {            return {                success: false,                message: error.response?.data?.msg || 'Registration failed'            };        }    };    const logout = () => {        localStorage.removeItem('token');        setIsAuthenticated(false);        setUser(null);    };    return (        <AuthContext.Provider value={{ user, isAuthenticated, loading, login, register, logout }}>            {children}        </AuthContext.Provider>    );};